Привет! Здесь лежит описание моего проекта, оно разбито на блоки, как и сказано в домашке:

ссылка на видео демонстрацию того, как работает API: https://disk.yandex.ru/i/1QnC3g_WfTPz8w

1. Структура и описание API
2. Примеры запросов
3. Инструкции по запуску
4. Описание БД
5. Тесты



**Описание работы API и примеры запросов:**

Пройдемся по каждой ручке:
- POST /links/shorten (может работать без авторизации) - создает короткую ссылку и записывает ее базу. Если пользователь был авторизован, то он сможет в дальнейшем изменять и удалять ссылку, если нет то ссылку никто не сможет поменять или удалить, она автоматически удалиться спустя время. Принимает на вход:
    - **original_link** - ссылку, которую хотим сократить
    - **custom_alias** [опционально]- кастомное название для замены ссылки (от 4 до 16 символов), если не указано, по умолчанию создается случайная
    - **expires_in_minutes** [опционально] - время протухание ссылки, по умолчанию 3 часа
  - Пример запроса:
![image](https://github.com/user-attachments/assets/7bd9ffb5-3dcf-4140-9c2c-1cc8ce080cb4)
 
- GET /links/{short_code} (работает без авторизации)- редиректит на оригинальную ссылку по укороченной. Принимает на вход:
    - **short_code** - название укороченной ссылки
  - Пример запроса:
![image](https://github.com/user-attachments/assets/2c529b81-bf14-462b-9697-4e96bed153df)

- DELETE /links/{short_code} (работает только с авторизацией) - удаляет ссылку, сгенерированную ранее. В запрос необходимо добавлять токен авторизации через заголовки. Принимает на вход:
    - **short_code** - укороченная ссылка, которую хотим удалить
  - Пример запроса:
![image](https://github.com/user-attachments/assets/99cc2661-d8b3-41ac-9bb1-2c5605838409)

- PUT /links/{short_code} (работает только с авторизацией) - обновляет информацию по созданному алиасу, заменяет оригинальную ссылку. В запрос необходимо добавлять токен авторизации через заголовки. Принимает на вход:
    - **short_code** - укороченная ссылка, которую хотим поменять
    - **new_url** - новая ссылка, на которую хотим заменить
  - Пример запроса:
![image](https://github.com/user-attachments/assets/fc5aa54f-e200-4585-a746-9e4d439a3c64)

- GET /links/{short_code}/stats (работает только с авторизацией) - позволяет посмотреть статистику по ссылкам: кол-во переходов, дату последнего перехода. В запрос необходимо добавлять токен авторизации через заголовки. Принимает на вход:
    - **short_code** - укороченная ссылка, по которой хотим посмотреть статистику
  - Пример запроса:
![image](https://github.com/user-attachments/assets/06dfd93e-4085-4e50-8a2d-348b85161660)

- GET /links/links/search (работает без авторизации) - возвращает первый попавшийся алиас для оригинальной ссылки, если он есть в базе данных
    - **original_url** - ссылка, скоращение для которой хотим найти
  - Пример запроса:
![image](https://github.com/user-attachments/assets/68c5333d-85e3-49c4-9d9f-29b6d24dd027)

- POST /register - регистрация пользователя по email и password. Принимает на вход:
    - **email** - имейл
    - **password** - пароль
  - Пример запроса:
![image](https://github.com/user-attachments/assets/71fd8916-9b5f-4225-bc3e-dcae2572d601)

- POST /login - залогинивание пользователя, на выходе отдает токен для авторизации. Принимает на вход:
    - **email** - имейл
    - **password** - пароль
  - Пример запроса:
![image](https://github.com/user-attachments/assets/47bbe658-255e-424e-b907-d098f480fb73)



**Описание БД**:

Users - таблица, которая хранит в себе инфу о юзерах, имеет следующую структуру: 
<img width="837" alt="image" src="https://github.com/user-attachments/assets/a6867706-fd3a-425d-8a89-b57b9ccdc9f1" />


Links - таблица, содержащая все данные по ссылкам:
<img width="839" alt="image" src="https://github.com/user-attachments/assets/d6aa861a-b1ac-4f5b-a764-3df51578edba" />


Для запуска необходимо скачать себе репу, запустить postgres и запустить app/main.py в питоне


**Тесты**
Чтобы запустить coverage, нужно скачать проект и запустить coverage run -m python tests/
По общему покрытию тестами получилось 80% (я пытался, но выбить больше не осталось сил :-( )
Скриншот:
<img width="638" alt="image" src="https://github.com/user-attachments/assets/7255d4c6-76ff-4dc5-823d-3ba7b1735f24" />

Также этот отчет можно посмотреть, достав его из папки htmlcov - файл index.html

**Нагрузочное тестирование**
К сожалению не удалось провести нормальное нагрузочное тестирование всех ручек, потому что многие из них используют данные из БД, а подключиться к данным с помощью locust мне не удалось. Но те ручки, что удалось протестировать, работают безотказно!
![image](https://github.com/user-attachments/assets/5fc514cc-3db5-42f7-b2de-4bc53fb9b99c)




